/* ==========================================================================
   Components
   ========================================================================== */

/* Tools
   ========================================================================== */

.tools {
   font-size: 0;
   backface-visibility: hidden;
   &__group {
      float: left;
      max-width: 0;
      white-space: nowrap;
      overflow: hidden;
      opacity: 0;
      transition: max-width .1s, opacity .1s, margin .1s;
   }
   &__item {
      @extend %icon;
      @include size($leading * 1);
      display: block;
      margin-left: .25rem;
      background: none;
      font-size: 0;
      transition: transform .1s;
      &:before {
         @include size(100%);
         display: block;
         margin: 0;
         background-size: 100%;
         opacity: .6;
         transition: opacity .1s;
      }
      &:hover,
      &.ng-active, {
         transform: scale(1.4);
      }
      &.ng-active {
         position: relative;
         @include after {
            @include position($bottom: 0, $left: 20%);
            @include size(60%);
            z-index: -1;
            display: block;
            background: brand(yellow);
            border-radius: 50%;
            backface-visibility: hidden;
         }
      }
      &[disabled] {
         &:hover {
            transform: none;
         }
         &:before {
            opacity: .1;
         }
      }
      &--group {
         float: right;
         &.ng-active + .tools__group {
            max-width: 500px;
            overflow: visible;
            margin: 0 .1rem 0 .5rem;
            opacity: 1;
            transition: max-width .5s, opacity .5s, margin .3s;
         }
      }
   }
   &--small &__item {
      @include size($leading * .75);
      @include blank-lines(.125, both);
   }
   &--flush {
      float: right;
      margin-left: 1rem;
   }
   &--binary {
      display: inline-flex;
      flex-direction: column;
      vertical-align: bottom;
   }
   &--binary &__item {
      @include size($leading / 2);
   }
}


/* Exam
   ========================================================================== */

.exam {
   &__section {
      @include blank-lines(3, trailing);
      @extend %trim-trailing-lines;
      @extend %vertical-slide;
      > header {
         @include blank-lines(.5, trailing);
         position: relative;
         display: flex;
         align-items: center;
         @include before() {
            @include position($left: 0, $right: 0, $bottom: 0);
            height: 2px;
            border: solid rgba(black, .5);
            border-width: 1px 0;
         }
         .heading {
            @include blank-lines(.5, trailing);
            flex: 1;
         }
         .tools {
            opacity: .25;
            transition: opacity .25s;
         }
      }
      &:hover {
         > header .tools {
            opacity: 1;
         }
      }
   }
   &__points {
      @extend %delta;
      height: $leading;
      line-height: $leading;
      font-family: "Roboto", sans-serif;
      font-style: italic;
      .tools + & {
         width: 20%;
         text-align: right;
      }

   }
   &__contents {
      position: fixed;
      overflow: hidden;
      top: $leading * 4;
      left: calc(50% + #{($layout-width / 2) - $gutter});
      padding-left: $gutter;
      font-family: "Roboto", sans-serif;
      font-weight: 300;
      a {
         text-decoration: none;
         color: rgba(black, .6);
         opacity: .3;
         transition: opacity .2s;
         &.ng-done {
            text-decoration: line-through;
         }
         &:empty:after {
            content: '(untitled)';
         }
      }
      &:hover a,
      a.ng-active {
         opacity: 1;
      }
      li {
         @extend %vertical-slide;
      }
   }
   &__date {
      @extend %strip;
      display: inline-block;
      height: $leading * 2;
      font-weight: 700;
      cursor: pointer;
   }
}

   .question {
      @include blank-lines(2, trailing);
      @extend %trim-trailing-lines;
      @extend %vertical-slide;
      > header {
         @include blank-lines(.5, trailing);
         padding-bottom: calc(#{$leading / 2} - 1px);
         border-bottom: 1px solid rgba(black, .5);
         display: flex;
         align-items: center;
         .heading {
            flex: 1;
            margin-bottom: 0;
            white-space: nowrap;
         }
      }
      .tools {
         opacity: .25;
         transition: opacity .25s;
      }
      &:hover {
          .tools {
            opacity: 1;
         }
      }
      &__chunk {
         @extend %vertical-slide;
         clear: both;
      }
      &__image {
         @extend %aloof;
         @extend %center;
         clear: both;
         display: block;
         max-width: 100%;
         .tools + & {

         }
      }
      &__answer {
         p, pre, .bullet-list {
            @extend %inset;
         }
      }
      &__answer &__image {
         box-sizing: border-box;
         border: 1px solid rgba(black, .25);
      }
   }


/* Canvas
   ========================================================================== */

.canvas {
   @extend %aloof;
   clear: both;
   canvas {
      box-sizing: border-box;
      border: 1px solid rgba(black, .25);
      image-rendering: optimize-contrast;
   }
   &__tools {
      @include blank-lines(.25, leading);
   }
}


/* Exam preview
   ========================================================================== */

.exam-preview {
   @extend %t-preview;
   @include blank-lines(1.5, trailing);
   transition: transform .1s;
   .content {
      transition: color, border-color, border-width, background, box-shadow;
      transition-duration: .3s;
   }
   &__student {
      line-height: 1;
      font-family: "PT Sans Narrow", sans-serif;
   }
   &__subject {
      margin-bottom: 0;
      font-family: "PT Sans", sans-serif;
   }
   &__date {
      font-family: "PT Sans", sans-serif;
      font-style: italic;
   }
   &.ng-urgent {
      color: brand(red) !important;
      .content {
         border-color: brand(red);
      }
   }
   &:hover {
      z-index: 1000;
      transform: scale(1.5);
      .content {
         @extend %t-sheet;
         box-shadow: 20px 17px 0 0 rgba(black, .05);
      }
   }
}

/* Category preview
   ========================================================================== */

.category-preview {
   @extend %t-preview;
   @include blank-lines(1.5, trailing);
   transition: transform .3s;
   .content {
      transition: color, border-color, border-width, background, box-shadow;
      transition-duration: .3s;
      @include before {
         @include position($top: 3px, $left: 0, $right: 0);
         height: 3px;
         border: solid rgba(black, .5);
         border-width: 1px 0;
         transition: opacity .3s;
      }
   }
   &:before, &:after {
      @extend %t-sheet;
      @include position($top: 0, $left: 0);
      @include size(100%);
      content: '';
      z-index: -1;
      background: darken(white, 2%);
      transition: transform .3s, opacity .15s .15s;
      opacity: 0;
   }
   &:after {
      background: darken(white, 3%);
      z-index: -2;
   }
   &:hover {
      transform: translate(-10px, 10px);
      .content {
         @extend %t-sheet;
         &:before {
            opacity: 0;
         }
      }
      &:before, &:after {
         transition: transform .3s, opacity .1s;
         opacity: 1;
      }
      &:before {
         transform: translate(9px, -10px);
      }
      &:after {
         transform: translate(20px, -20px);
      }
   }
   &__heading {
      line-height: 1;
      font-family: "PT Sans Narrow", sans-serif;
      &:not(:last-child) {
         //@extend %heading--subsection;
      }
   }
   &__subheading {
      font-family: "PT Sans", sans-serif;
      font-style: italic;
   }
}


/* List
   ========================================================================== */

.list {
   @extend %islet;
}


/* Modal
   ========================================================================== */

.modal {
   @include blank-lines(1, both, padding);
   @include taper(1, both);
   display: flex;
   align-items: stretch;
   position: fixed;
   top: 50%;
   left: 50%;
   z-index: 1000;
   transform: translate3d(-50%, -50%, 0);
   width: $main-content-width * 4/5;
   box-sizing: border-box;
   background: lighten(brand(yellow), 10%);
   box-shadow: 1em 1em 0 0 rgba(black, .1);
   pointer-events: auto;

   &__close {
      display: none;
      @include position($top: $leading * .25, $right: $leading * .25);
   }
   &__content {
      flex: 1;
      text-align: right;
   }
   &__prompt {
      @extend %delta;
      font-family: "Roboto", sans-serif;
      font-weight: 300;
      color: rgba(black, .6);
      text-align: left;
   }
   @include icon {
      display: block;
      min-width: 8rem;
      min-height: 6rem;
      width: auto;
      height: auto;
   }
   &--affirm {
      background: lighten(brand(purple), 20%);
   }
   &--loadImage {
      @extend %icon--photo;
      background: lighten(brand(purple), 20%);
   }
   &--success {
      @extend %icon--thumbs-up;
      background: lighten(brand(green), 10%);
   }
   &--alert {
      @extend %icon--caution;
      background: lighten(brand(yellow), 10%);
   }
   &--confirm {
      @extend %icon--question-mark;
      background: lighten(brand(yellow), 5%);

   }
   &--error {
      @extend %icon--caution;
      background: lighten(brand(red), 20%);
   }





   &.ng-animate {
      transition: transform .2s, opacity .2s;
   }
   &.ng-enter {
      transform: translate3d(-100%, -50%, 0);
      opacity: 0;
   }
   &.ng-enter-active,
   &.ng-leave {
      transform: translate3d(-50%, -50%, 0);
      opacity: 1;
   }
   &.ng-leave-active {
      transform: translate3d(100%, -50%, 0);
      opacity: 0;
   }
}
